/** * Created by jbmar on 16/05/2017. */function submitForm() {    $('#frmUploader').ajaxSubmit({        success: showResponse    });    return false;}function showResponse(responseText, statusText, xhr, $form) {    let dataRes = JSON.parse(xhr.responseText),        divError = $("#error")    ;    $('<div/>', {        id: dataRes.response.idPhoto,        class: 'div-photo-user',        css: {            'background-image': 'url(' + dataRes.response.srcPhoto + ')'        },        prependTo: $('#photos-user-account'),        on: {            click: function() { interactPhoto(dataRes.response.idPhoto) }        }    });    if ((dataRes.isErr === 0 || dataRes.isErr === 1) && (dataRes.response)) {        divError.removeClass('red green');        dataRes.isErr === 1 ?            divError.addClass('red') : divError.addClass('green');        dataRes.isErr === 1 ?            divError.text(dataRes.response) : divError.text(dataRes.response.mess);    }}$('body').on('click', function (e) {    if (e.target.classList.contains('div-photo-user') ||        e.target.classList.contains('del') ||        e.target.classList.contains('profil')) {        return false;    }    $('#interact-photos').removeClass('expand');    $('.div-photo-user').removeClass('profil');});function interactPhoto(photoId) {    $('.div-photo-user').removeClass('profil');    $('#interact-photos').addClass('expand');    $('#' + photoId).addClass('profil');    $('#button-del-account').off('click').on('click', function () {        removePhoto(photoId);    });    $('#button-profil-account').off('click').on('click', function () {        addFavoritePhoto(photoId);    });}function removePhoto(idPhoto) {    $.post('/account/Delete', { id: idPhoto }, function (data, textStatus, jqXHR) {        var dataRes = JSON.parse(jqXHR.responseText),            divError = $("#error")        ;        divError.removeClass('red green');        dataRes.isErr === 1 ? divError.addClass('red') : divError.addClass('green');        divError.text(dataRes.response);        $('#' + idPhoto).remove();    });}function addFavoritePhoto(idPhoto) {    $.post('/account/Favorite', { id: idPhoto }, function (data, textStatus, jqXHR) {        var dataRes = JSON.parse(jqXHR.responseText),            divError = $("#error")        ;        if (dataRes.response !== 0 && dataRes.response !== 1){            divError.removeClass('red green');            dataRes.isErr === 1 ? divError.addClass('red') : divError.addClass('green');            divError.text(dataRes.response);        }        $('#imgStar').remove();        $('#' + idPhoto).removeClass('star');        $('<div/>', {            id: dataRes.response.idPhoto,            class: 'div-photo-user',            css: {                'background-image': 'url(' + dataRes.response.srcPhoto + ')'            },            prependTo: $('#photos-user-account'),            on: {                click: function() { interactPhoto(dataRes.response.idPhoto) }            }        });        $('<img/>', {            id: "imgStar",            class: "imgStar",            src: "/images/tools/star.png",            appendTo: $('#' + idPhoto)        });        $('#' + idPhoto).addClass('star');    });}