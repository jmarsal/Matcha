/** * Created by jbmar on 16/05/2017. */function submitForm() {    $('#frmUploader').ajaxSubmit({        success: showResponse    });    return false;}function showResponse(responseText, statusText, xhr, $form) {    let dataRes = JSON.parse(xhr.responseText),        divError = $("#error")    ;    $('<div/>', {        id: dataRes.response.idPhoto,        class: 'div-photo-user',        css: {            'background-image': 'url(' + dataRes.response.srcPhoto + ')'        },        prependTo: $('#photos-user-account'),        on: {            click: function() { interactPhoto(dataRes.response.idPhoto) }        }    });    if ($('.div-photo-user').length === 5){        $('.input-file-trigger').css('display', 'none');    }    if ((dataRes.isErr === 0 || dataRes.isErr === 1) && (dataRes.response)) {        divError.removeClass('red green');        dataRes.isErr === 1 ?            divError.addClass('red') : divError.addClass('green');        dataRes.isErr === 1 ?            divError.text(dataRes.response) : divError.text(dataRes.response.mess);    }}$('body').on('click', function (e) {    if (e.target.classList.contains('div-photo-user') ||        e.target.classList.contains('del') ||        e.target.classList.contains('profil')) {        return false;    }    reduceInteract();});function reduceInteract() {    $('#interact-photos').removeClass('expand');    $('.div-photo-user').removeClass('profil');    $('#imgStar').removeClass('profilStar');    $('#interact-photos').css('display', 'none');}function interactPhoto(photoId) {    $('#interact-photos').css('display', 'block');    $('.div-photo-user').removeClass('profil');    $('#interact-photos').addClass('expand');    $('#' + photoId).addClass('profil');    $('#imgStar').addClass('profilStar');    $('#button-del-account').off('click').on('click', function () {        removePhoto(photoId);    });    $('#button-profil-account').off('click').on('click', function () {        addFavoritePhoto(photoId);    });}function removePhoto(idPhoto) {    $.post('/account/Delete', { id: idPhoto }, function (data, textStatus, jqXHR) {        var dataRes = JSON.parse(jqXHR.responseText),            divError = $("#error")        ;        divError.removeClass('red green');        dataRes.isErr === 1 ? divError.addClass('red') : divError.addClass('green');        divError.text(dataRes.response);        $('#' + idPhoto).remove();        console.log($('.div-photo-user').length);        if ($('.div-photo-user').length < 5){            $('.input-file-trigger').css('display', 'inline-block');        }        reduceInteract();    });}function addFavoritePhoto(idPhoto) {    $.post('/account/Favorite', { id: idPhoto }, function (data, textStatus, jqXHR) {        var dataRes = JSON.parse(jqXHR.responseText),            divError = $("#error")        ;        if (dataRes.response !== 0 && dataRes.response !== 1){            divError.removeClass('red green');            dataRes.isErr === 1 ? divError.addClass('red') : divError.addClass('green');            divError.text(dataRes.response);        }        $('#imgStar').remove();        $('.div-photo-user').removeClass('star');        let imgStar = $('<img/>', {            id: "imgStar",            class: "imgStar profilStar",            src: "/images/tools/star.png",        });        $('#' + idPhoto).addClass('star').after(imgStar);        reduceInteract();    });}function submitForm(input) {    let submit = 0,        checkInput = "";    ;    if (input === 'email') {        let diff = $("#hiddenEmailAccountInput").val();        checkInput = $('#emailAccountInput').val();        if (diff !== checkInput) {            submit = 1;        }    }    if (input === 'login') {    //    etc ...    }    if (submit === 1) {        $("#formAccount").submit();    }    // let test = document.getElementById("formAccount");    // console.log(test.elements.emailRegisterInput.value);}$("#formAccount").submit(function (e) {    e.preventDefault();    console.log($(e.target).serialize());    // $.post('/logon/form', $(e.target).serialize(), function (data, textStatus, jqXHR) {    //     var dataRes = JSON.parse(jqXHR.responseText),    //         divError = $("#error")    //     ;    //    //     divError.removeClass('red green');    //     dataRes.isErr === 1 ? divError.addClass('red') : divError.addClass('green');    //    //     if (dataRes.isRedirect && dataRes.isURL){    //         divError.text(dataRes.response + ' Vous allez etre redirigÃ© sur la page de connection dans un instant...');    //         setTimeout(() => {    //             window.location.replace(dataRes.isURL);    //         }, 3000);    //     } else {    //         divError.text(dataRes.response);    //     }    // });});