/** * Created by jbmar on 16/05/2017. */// $(document).ready(function() {//     $("container-photos").addEventListener("blur", alert('enfin'));// });function submitForm() {    $('#frmUploader').ajaxSubmit({        success: showResponse    });    return false;}// post-submit callbackfunction showResponse(responseText, statusText, xhr, $form) {    var dataRes = JSON.parse(xhr.responseText),        divError = $("#error")    ;    if ((dataRes.isErr === 0 || dataRes.isErr === 1) && (dataRes.response)) {        divError.removeClass('red green');        dataRes.isErr === 1 ?            divError.addClass('red') : divError.addClass('green');        dataRes.isErr === 1 ?            divError.text(dataRes.response) : divError.text(dataRes.response.mess);        if (dataRes.response.srcPhoto) {            let button = document.createElement("button"),                img = dataRes.response.srcPhoto,                countElems = document.querySelectorAll('#photos-user-account .container-photos div'),                name = dataRes.response.idPhoto            ;            button.className = 'div-photo-user';            button.id = name;            button.onclick = function () { interactPhoto(name) };            button.onblur = function () { closeInteract() };            console.log(dataRes.response.idPhoto);            $('label').before(button);            $('#' + name).css('background-image', 'url("' + img + '")');            if (countElems.length === 5) {                $('#input-file-trigger').css('display', 'none');            }        }    }}function interactPhoto(photoId) {    let divContainer = document.createElement('div'),        div = document.createElement('div'),        del = document.createElement('button'),        profil = document.createElement('button')    ;    if (!$('#div-container-interact').length) {        $('button').removeClass('profil');        divContainer.className='div-container-interact';        divContainer.id='div-container-interact';        div.className='interact-photo';        div.id='interact-photo';        del.innerHTML="supprimer ?";        del.className="button del";        profil.innerHTML="photo de profil ?";        profil.className="button profil";        $('#interact-photos').append(divContainer)        $('#' + divContainer.id).append(div);        $('#' + div.id).append(del);        $('#' + div.id).append(profil);        $('#' + div.id).onblur= function () { closeInteract(); };        // $('#' + photoId).css('border', '2px solid #ddba00');        $('#' + photoId).addClass('profil');    }}function closeInteract() {    $('#div-container-interact').remove();}